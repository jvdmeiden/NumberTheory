<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Seed Spirals</title>
<script>
    function combo(thelist, factor) {
        theinput = document.getElementById(factor);
        var idx = thelist.selectedIndex;
        var content = thelist.options[idx].innerHTML;
        theinput.value = content;
    }
  </script>
</head>
<body id="body">
<form>
  <fieldset>
    <font color="white">
    <legend>Parameters</legend>
    <label>Scale:</label>	
   <input type="number" id="scale" name="scale" value=6/>
    <label>ColorSteps:</label>	
   <input type="number" id="inc" name="inc" value=7/>
  <label>Steps per color:</label>
   <label>Factor (in Javascript notation, eg Math.PI):</label>
    <input type="text" id="factor" name="factor" list="factorList" value="(1+Math.sqrt(5))/2"/>
    <datalist id="factorList">
      <option value="1/7">
      <option value="Math.PI">
      <option value="Math.sqrt(3)">
      <option value="(1+Math.sqrt(5))/2">
      <option value="Math.E">
      <option value="Math.sqrt(511)">
    </datalist>
  <p><input type="button" value="Run" onclick="submitFactor();" /><input type="button" value="Stop" onclick="stopSpiral();" /><input type="button" value="Continue" onclick="cont();" /></p>
  </font>
  </fieldset>
</form>

<svg xmlns="http://www.w3.org/2000/svg" onload="startup(evt)" style="background-color: rgb(10,10,10)" width="900" height="900"> 
<!-- Author: Jan van der Meiden                                           -->
<!-- jvdmeiden@gmail.com                                                  -->
<!-- Version: 20141108.00                                                 -->
<!-- Copyright (c) 2014 Jan van der Meiden.                               -->
<!-- Copying and distribution of this file, with or without modification, -->
<!-- are permitted in any medium without royalty provided the copyright   -->
<!-- notice and this notice are preserved.                                -->

<script><![CDATA[
var SVGDoc = null;
var svgns = 'http://www.w3.org/2000/svg';
var offsetX = 450;
var offsetY = 450;
var myFactor = 0;
var myInc = 0;
var steps = 0;
var fib = 0;
var stop = false;

function stopSpiral(){
  stop=true;
}

function cont(){
  stop=false;
  tick();
}

function tick(evt){
  steps = steps + 1; 
  
  NewDot = SVGDoc.createElementNS(svgns,"circle"); 
//  var cx=Math.sqrt(steps)*Math.cos(2*Math.PI*myFactor*steps)*5;
//  var cy=Math.sqrt(steps)*Math.sin(2*Math.PI*myFactor*steps)*5;
  var cx=(Math.sqrt(steps)*scale)*Math.cos(2*Math.PI*myFactor*steps);
  var cy=(Math.sqrt(steps)*scale)*Math.sin(2*Math.PI*myFactor*steps);
  NewDot.setAttribute("cx", offsetX+cx); 
  NewDot.setAttribute("cy", offsetY+cy); 
//  console.log("Steps: "+steps+" Factor: "+myFactor+" cx,cy "+cx+","+cy);
  NewDot.setAttribute("r", scale/2); 
  NewDot.setAttribute("opacity", 0.8); 
//  NewDot.setAttribute("fill","rgb(255,"+parseInt((steps%myInc)*255/myInc)+","+parseInt((steps/100)%255)+")"); 
  NewDot.setAttribute("fill","rgb(0,"+parseInt((steps%myInc)*255/myInc)+",255)"); 
  dotRoot.appendChild(NewDot); 
  if ((cx*cx+cy*cy)<(offsetX*offsetX+offsetY*offsetY)&&stop==false){
    t=setTimeout("tick()",scale-1); 
  }
}   

function submitFactor(evt){
  element = document.getElementById("Dots");
  while (element.firstChild) {
    element.removeChild(element.firstChild);
  }
  steps =0;
  myFactor=(eval(document.getElementById( 'factor' ).value));
  myInc=(eval(document.getElementById( 'inc' ).value));
  scale=(eval(document.getElementById( 'scale' ).value));
  setTimeout("tick()",scale-1);
}

function startup(evt){
  SVGDoc = evt.target.ownerDocument;
  dotRoot = SVGDoc.getElementById("Dots"); 
}

function toggleField(fieldName,nameIndex){
  var hideObj=document.getElementsByName(fieldName)[nameIndex];
  var showObj=document.getElementsByName(fieldName)[1-nameIndex];
  hideObj.disabled=true;        
  hideObj.style.display='none';
  showObj.disabled=false;   
  showObj.style.display='inline';
  showObj.focus();
}

]]></script> 
 <g id="Dots">
 </g>
</svg> 

</body>
</html>

